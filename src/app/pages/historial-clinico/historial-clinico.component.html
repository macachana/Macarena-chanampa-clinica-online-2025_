<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>
    <div class="contenedor-h">
        <div class="imagenFondo">
            <img src="https://i.postimg.cc/MK4HPRB3/59-C64206-ADC9-47-BF-961-C-F2-CA5750-A25-D.png"/>
        </div>        

        <div class="contenedor">
            @if(this.db.mostrarHistorial)
            {
                @for(historial of this.listaHistorial; track historial.id)
                {
                    @if(historial.paciente.id == this.db.idPaciente)
                    {
                        <label class="titulo">HISTORIAL CLINICO DEL PACIENTE {{ historial.paciente.nombre }} {{ historial.paciente.apellido }}</label>
                        <div class="historialClinico">
                            <label><b>Altura: </b>{{ historial.altura}}</label>
                            <label><b>Peso: </b>{{ historial.peso}}</label>
                            <label><b>Temperatura: </b>{{ historial.temperatura}}</label>
                            @for(dato of historial.datoDinamico; track dato)
                            {
                                <label><b>{{dato}}: </b>{{historial.datoDinamico[dato]}}</label>
                            }                           
                        </div>
                    }
                }
            }
            @else 
            {   
                <label class="titulo">INGRESE EL HISTORIAL CLÍNICO DEL PACIENTE {{this.db.idPaciente}}</label>
                <form [formGroup]="formHistoria">
                    <label for="altura">Ingrese la altura del paciente: </label>
                    <input type="number" formControlName="altura" />
                    @if(formHistoria.controls.altura.touched)
                    {
                        @if(formHistoria.controls.altura.hasError("required"))
                        {
                            <small style="color:red;">La altura es obligatoria.</small>
                        }
                        @else if(formHistoria.controls.altura.hasError("min"))
                        {
                            <small style="color:red;">¡¡¡El altura debe ser mayor a 0!!!.</small>
                        }
                        @else if(formHistoria.controls.altura.hasError("max"))
                        {
                            <small style="color:red;">¡¡¡El altura no puede ser más de 3 metros!!!.</small>
                        }
                    }

                    <label for="peso">Ingrese el peso del paciente: </label>
                    <input type="number" formControlName="peso" />
                    @if(formHistoria.controls.peso.touched)
                    {
                        @if(formHistoria.controls.peso.hasError("required"))
                        {
                            <small style="color:red;">El peso es obligatorio.</small>
                        }
                        @else if(formHistoria.controls.peso.hasError("min"))
                        {
                            <small style="color:red;">¡¡¡El peso debe ser mayor a 0!!!.</small>
                        }
                        @else if(formHistoria.controls.peso.hasError("max"))
                        {
                            <small style="color:red;">¡¡¡El peso no puede ser más de 200 kilos!!!.</small>
                        }
                    }  

                    <label for="temperatura">Ingrese la temperatura del paciente: </label>
                    <input type="number" formControlName="temperatura" />
                    @if(formHistoria.controls.temperatura.touched)
                    {
                        @if(formHistoria.controls.temperatura.hasError("required"))
                        {
                            <small style="color:red;">La temperatura es obligatoria.</small>
                        }
                        @else if(formHistoria.controls.temperatura.hasError("min"))
                        {
                            <small style="color:red;">¡¡¡La temperatura debe ser mayor a 35°!!!.</small>
                        }
                        @else if(formHistoria.controls.temperatura.hasError("max"))
                        {
                            <small style="color:red;">¡¡¡La temperatura no puede ser más de 50°!!!.</small>
                        }
                    }  

                    <label for="presion">Ingrese la presion del paciente: </label>
                    <input type="number" formControlName="presion" />
                    @if(formHistoria.controls.presion.touched)
                    {
                        @if(formHistoria.controls.presion.hasError("required"))
                        {
                            <small style="color:red;">La presion es obligatoria.</small>
                        }
                        @else if(formHistoria.controls.presion.hasError("min"))
                        {
                            <small style="color:red;">¡¡¡La presion debe ser mayor de 60!!!.</small>
                        }
                        @else if(formHistoria.controls.presion.hasError("max"))
                        {
                            <small style="color:red;">¡¡¡La presion no puede ser más de 200!!!.</small>
                        }
                    }
                    <label>Datos extras: </label>
                    <div class="formInputs">
                        <div class="formRow">
                            <input type="text" id="clave01" placeholder="Nombre del dato 01"/>
                            <input type="text" id="valor01" placeholder="Dato 01"/>
                        </div>
                        <div class="formRow">
                            <input type="text" id="clave02" placeholder="Nombre del dato 02"/>
                            <input type="text" id="valor02" placeholder="Dato 02"/>
                        </div>
                        <div class="formRow">
                            <input type="text" id="clave03" placeholder="Nombre del dato 03"/>
                            <input type="text" id="valor03" placeholder="Dato 03"/>
                        </div>
                    </div>
                </form>
                <div class="botones">
                    <button routerLink="/mis_turnos" type="button" class="btn btn-secondary"><i class="bi bi-reply-fill"></i></button>
                    <button (click)="guardarHistorial()" type="button" class="btn btn-success">Enviar</button>
                </div>
            }
        </div>
    </div>
</body>
</html>